2019-07-16 14:38:15 - Starting MainApp on PC-workstation with PID 5036 (H:\workspace\RISOrderAdaptor\bin started by lihaijiang in H:\workspace\RISOrderAdaptor)
2019-07-16 14:38:15 - Running with Spring Boot v1.4.7.RELEASE, Spring v4.3.9.RELEASE
2019-07-16 14:38:15 - No active profile set, falling back to default profiles: default
2019-07-16 14:38:15 - Refreshing org.springframework.boot.context.embedded.AnnotationConfigEmbeddedWebApplicationContext@604bfe6b: startup date [Tue Jul 16 14:38:15 CST 2019]; root of context hierarchy
2019-07-16 14:38:16 - HV000001: Hibernate Validator 5.2.5.Final
2019-07-16 14:38:17 - Loading XML bean definitions from class path resource [beans.xml]
2019-07-16 14:38:19 - Tomcat initialized with port(s): 80 (http)
2019-07-16 14:38:19 - Starting service Tomcat
2019-07-16 14:38:19 - Starting Servlet Engine: Apache Tomcat/7.0.59
2019-07-16 14:38:19 - Initializing Spring embedded WebApplicationContext
2019-07-16 14:38:19 - Root WebApplicationContext: initialization completed in 3944 ms
2019-07-16 14:38:19 - Mapping servlet: 'dispatcherServlet' to [/]
2019-07-16 14:38:19 - Mapping filter: 'characterEncodingFilter' to: [/*]
2019-07-16 14:38:19 - Mapping filter: 'hiddenHttpMethodFilter' to: [/*]
2019-07-16 14:38:19 - Mapping filter: 'httpPutFormContentFilter' to: [/*]
2019-07-16 14:38:19 - Mapping filter: 'requestContextFilter' to: [/*]
2019-07-16 14:38:21 - Looking for @ControllerAdvice: org.springframework.boot.context.embedded.AnnotationConfigEmbeddedWebApplicationContext@604bfe6b: startup date [Tue Jul 16 14:38:15 CST 2019]; root of context hierarchy
2019-07-16 14:38:22 - Mapped "{[/testPost],methods=[POST]}" onto public java.lang.String com.app.controller.HTTPTestController.testPost(javax.servlet.http.HttpServletRequest,java.util.Map)
2019-07-16 14:38:22 - Mapped "{[/testGet]}" onto public java.lang.String com.app.controller.HTTPTestController.testGet(javax.servlet.http.HttpServletRequest)
2019-07-16 14:38:22 - Mapped "{[/],methods=[GET]}" onto public java.lang.String com.app.controller.MainController.index()
2019-07-16 14:38:22 - Mapped "{[/index]}" onto public java.lang.String com.app.controller.MainController.index(javax.servlet.http.HttpServletRequest,org.springframework.ui.Model)
2019-07-16 14:38:22 - Mapped "{[/test]}" onto public java.lang.String com.app.controller.MainController.test(javax.servlet.http.HttpServletRequest,org.springframework.ui.Model)
2019-07-16 14:38:22 - Mapped "{[/createNewOrder],methods=[POST]}" onto public com.app.controller.ResultObj com.app.controller.MainController.createNewOrder(javax.servlet.http.HttpServletRequest,java.lang.String)
2019-07-16 14:38:22 - Mapped "{[/schedule],methods=[POST]}" onto public com.app.controller.ResultObj com.app.controller.MainController.schedule(javax.servlet.http.HttpServletRequest,java.lang.String)
2019-07-16 14:38:22 - Mapped "{[/arrive],methods=[POST]}" onto public com.app.controller.ResultObj com.app.controller.MainController.arrive(javax.servlet.http.HttpServletRequest,java.lang.String)
2019-07-16 14:38:22 - Mapped "{[/error]}" onto public org.springframework.http.ResponseEntity<java.util.Map<java.lang.String, java.lang.Object>> org.springframework.boot.autoconfigure.web.BasicErrorController.error(javax.servlet.http.HttpServletRequest)
2019-07-16 14:38:22 - Mapped "{[/error],produces=[text/html]}" onto public org.springframework.web.servlet.ModelAndView org.springframework.boot.autoconfigure.web.BasicErrorController.errorHtml(javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse)
2019-07-16 14:38:22 - Mapped URL path [/webjars/**] onto handler of type [class org.springframework.web.servlet.resource.ResourceHttpRequestHandler]
2019-07-16 14:38:22 - Mapped URL path [/**] onto handler of type [class org.springframework.web.servlet.resource.ResourceHttpRequestHandler]
2019-07-16 14:38:22 - Mapped URL path [/**/favicon.ico] onto handler of type [class org.springframework.web.servlet.resource.ResourceHttpRequestHandler]
2019-07-16 14:38:22 - SpringTemplateLoader for FreeMarker: using resource loader [org.springframework.boot.context.embedded.AnnotationConfigEmbeddedWebApplicationContext@604bfe6b: startup date [Tue Jul 16 14:38:15 CST 2019]; root of context hierarchy] and template loader path [classpath:/templates/]
2019-07-16 14:38:22 - ClassTemplateLoader for Spring macros added to FreeMarker configuration
2019-07-16 14:38:22 - Cannot find template location(s): [classpath:/templates/] (please add some templates, check your FreeMarker configuration, or set spring.freemarker.checkTemplateLocation=false)
2019-07-16 14:38:24 - LiveReload server is running on port 35729
2019-07-16 14:38:25 - Registering beans for JMX exposure on startup
2019-07-16 14:38:25 - Initializing ProtocolHandler ["http-nio-80"]
2019-07-16 14:38:25 - Starting ProtocolHandler ["http-nio-80"]
2019-07-16 14:38:25 - Using a shared selector for servlet write/read
2019-07-16 14:38:25 - Tomcat started on port(s): 80 (http)
2019-07-16 14:38:28 - Creating Service {http://med.ge.com/rispacs/}UserMgmtOperationsService from class com.ge.med.catcorb.privilege.user.UserMgmtOperations
2019-07-16 14:38:29 - Outbound Message
---------------------------
ID: 1
Address: http://192.168.1.25:9000/services/UserMgmtService
Encoding: UTF-8
Content-Type: application/soap+xml; action="http://med.ge.com/rispacs/UserMgmtService/GetUserInfoByUserLoginName"
Headers: {Accept=[*/*], Accept-Encoding=[gzip;q=1.0, identity; q=0.5, *;q=0]}
Payload: <soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope"><soap:Body><ns2:UserLoginName xmlns:ns2="http://med.ge.com/rispacs/">itpschina</ns2:UserLoginName></soap:Body></soap:Envelope>
--------------------------------------
2019-07-16 14:38:29 - Inbound Message
----------------------------
ID: 1
Response-Code: 200
Encoding: UTF-8
Content-Type: application/soap+xml; charset=UTF-8
Headers: {Content-Length=[439], content-type=[application/soap+xml; charset=UTF-8], Server=[Jetty(7.5.4.v20111024)]}
Payload: <soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope"><soap:Body><ns2:GetUserInfoByUserLoginNameResponse xmlns:ns2="http://med.ge.com/rispacs/"><userID>1617</userID><userName>Service帐号</userName><userPasswd></userPasswd><userLogName>itpschina</userLogName><status>active</status><latestLogonDate>2019-07-11 10:22:33.0</latestLogonDate><pyAbbr></pyAbbr></ns2:GetUserInfoByUserLoginNameResponse></soap:Body></soap:Envelope>
--------------------------------------
2019-07-16 14:38:29 - RIS API Test Result:Service帐号
2019-07-16 14:38:29 - RISAPI Test Result: Service帐号
2019-07-16 14:38:30 - ==>  Preparing: select current_date 
2019-07-16 14:38:30 - ==> Parameters: 
2019-07-16 14:38:30 - <==      Total: 1
2019-07-16 14:38:30 - DB Test Result: 2019-07-11
2019-07-16 14:38:30 - Started MainApp in 16.495 seconds (JVM running for 17.686)
2019-07-16 14:38:32 - Initializing Spring FrameworkServlet 'dispatcherServlet'
2019-07-16 14:38:32 - FrameworkServlet 'dispatcherServlet': initialization started
2019-07-16 14:38:32 - FrameworkServlet 'dispatcherServlet': initialization completed in 43 ms
2019-07-16 14:38:32 - index mapping null
2019-07-16 14:38:44 - received new order:[{"HISEXAMNO":"HISEXAM003","PATIENTTYPE":"1","VISITTIMES":"2","DIAGNOSEID":"DIAGID001","HISID":"HISID001","NAME":"测试患者","SCHEDULED_DATE_START":"2019-07-09 15:20:00","SCHEDULED_DATE_END":"2019-07-09 16:20:00","SCHEDULED_MODALITY":"148","SCHEDULE_OPERATOR":"","CHECKITEM":"","CHECKSERIALNUM":"","CHECKITEMID":"XR001","FLAG":"NW"}]
2019-07-16 14:38:45 - convert to Map:{HISEXAMNO=HISEXAM003, PATIENTTYPE=1, VISITTIMES=2, DIAGNOSEID=DIAGID001, HISID=HISID001, NAME=测试患者, SCHEDULED_DATE_START=2019-07-09 15:20:00, SCHEDULED_DATE_END=2019-07-09 16:20:00, SCHEDULED_MODALITY=148, SCHEDULE_OPERATOR=, CHECKITEM=, CHECKSERIALNUM=, CHECKITEMID=XR001, FLAG=NW}
2019-07-16 14:38:45 - ==>  Preparing: select * from hisorder.his_order where applyCode=? and validFlag=0 
2019-07-16 14:38:45 - ==> Parameters: HISEXAM003(String)
2019-07-16 14:38:45 - <==      Total: 1
2019-07-16 14:38:45 - merged Map:{HISEXAMNO=HISEXAM003, PATIENTTYPE=1, VISITTIMES=2, DIAGNOSEID=DIAGID001, HISID=HISID001, NAME=测试患者, SCHEDULED_DATE_START=2019-07-09 15:20:00, SCHEDULED_DATE_END=2019-07-09 16:20:00, SCHEDULED_MODALITY=148, SCHEDULE_OPERATOR=, CHECKITEM=, CHECKSERIALNUM=, CHECKITEMID=XR001, FLAG=NW, createTime=13:17:09, sex=女, phone=11911912000, validFlag=0, orderCode=100888101281, visitNO=2, data_source=MQ, executeOfficeCode=放射科, bedNO=, SCHEDULE=0, disease=外伤, yiBao=自费, id=7, patientId=DIAGID001, organization=AA, patientName=测试患者, applyOffice=外科一, checkMethodCode=HISDX001, brithday=1980-01-01, verifierTime=2019:01:01, createDate=2019-07-11, note=输助诊断, checkPart=, patientCode=1, executeOffice=放射科, checkMethod=胸部正侧位, identityNO=110101198001012430, authorCode=, history=, cardNO=HISID001, charge=209.01, address=北京市, authorName=李医生, readFlag=0, authorTime=20190101120010, applyCode=HISEXAM003}
2019-07-16 14:38:45 - ==>  Preparing: SELECT m.ModalityID,psi.ProcedureStepID,psi.ProcedureStepName,ps.ProcedureName,m.ModalityName,md.deptname,m.ModalityLocation FROM gecris.ProcedureStepInfo psi,gecris.ProcedureInfo ps,gecris.ModalityInfo m,gecris.modalitydept md WHERE psi.ProcedureID=ps.ProcedureID AND m.is_valid=true AND ps.ProcedureIDType=m.ModalityID AND m.deptid=md.deptid AND psi.Status='active' AND psi.procedurestep_code=? AND m.ModalityID=? limit 1 
2019-07-16 14:38:45 - ==> Parameters: XR001(String), 148(String)
2019-07-16 14:38:45 - <==      Total: 1
2019-07-16 14:38:45 - filled procedure map:{HISEXAMNO=HISEXAM003, PATIENTTYPE=1, VISITTIMES=2, DIAGNOSEID=DIAGID001, HISID=HISID001, NAME=测试患者, SCHEDULED_DATE_START=2019-07-09 15:20:00, SCHEDULED_DATE_END=2019-07-09 16:20:00, SCHEDULED_MODALITY=148, SCHEDULE_OPERATOR=, CHECKITEM=, CHECKSERIALNUM=, CHECKITEMID=XR001, FLAG=NW, createTime=13:17:09, sex=女, phone=11911912000, validFlag=0, orderCode=100888101281, visitNO=2, data_source=MQ, executeOfficeCode=放射科, bedNO=, SCHEDULE=0, disease=外伤, yiBao=自费, id=7, patientId=DIAGID001, organization=AA, patientName=测试患者, applyOffice=外科一, checkMethodCode=HISDX001, brithday=1980-01-01, verifierTime=2019:01:01, createDate=2019-07-11, note=输助诊断, checkPart=, patientCode=1, executeOffice=放射科, checkMethod=胸部正侧位, identityNO=110101198001012430, authorCode=, history=, cardNO=HISID001, charge=209.01, address=北京市, authorName=李医生, readFlag=0, authorTime=20190101120010, applyCode=HISEXAM003, ModalityID=148, ModalityName=CT1, ModalityLocation=CT, ProcedureName=头部CT, deptname=CT室, ProcedureStepName=头部急诊平扫, ProcedureStepID=150}
2019-07-16 14:38:45 - Creating Service {http://med.ge.com/rispacs/}SearchEngineerOperationsService from class com.ge.med.dragon.rispacs.search.SearchEngineerOperations
2019-07-16 14:38:45 - jcorb query string:[<?xml version='1.0' encoding='utf-8' ?><fields><column name='e:WAIT,0267' value='100888101281'/></fields>]
2019-07-16 14:38:45 - Outbound Message
---------------------------
ID: 2
Address: http://192.168.1.25:9000/services/SearchEngineerService
Encoding: UTF-8
Content-Type: application/soap+xml; action="http://med.ge.com/rispacs/SearchEngineerService/Search"
Headers: {Accept=[*/*], Accept-Encoding=[gzip;q=1.0, identity; q=0.5, *;q=0]}
Payload: <soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope"><soap:Body><ns2:Xmlcond xmlns:ns2="http://med.ge.com/rispacs/">&lt;?xml version='1.0' encoding='utf-8' ?&gt;&lt;fields&gt;&lt;column name='e:WAIT,0267' value='100888101281'/&gt;&lt;/fields&gt;</ns2:Xmlcond><ns2:Tags xmlns:ns2="http://med.ge.com/rispacs/"><item>p:WAIT,0128</item><item>o:WAIT,0266</item><item>e:WAIT,0267</item><item>e:WAIT,0004</item><item>e:WAIT,0014</item><item>e:0008,0050</item></ns2:Tags></soap:Body></soap:Envelope>
--------------------------------------
2019-07-16 14:38:45 - Inbound Message
----------------------------
ID: 2
Response-Code: 200
Encoding: UTF-8
Content-Type: application/soap+xml; charset=UTF-8
Headers: {Content-Length=[167], content-type=[application/soap+xml; charset=UTF-8], Server=[Jetty(7.5.4.v20111024)]}
Payload: <soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope"><soap:Body><ns2:SearchResponse xmlns:ns2="http://med.ge.com/rispacs/"/></soap:Body></soap:Envelope>
--------------------------------------
2019-07-16 14:38:45 - order AEXAML=[<AEXMLMessage xmlns="http://com/ge/med/ehrae/ae">
	<column name="e:WAIT,0296" value="HISEXAM003"/>
	<column name="e:WAIT,0046" value="门诊"/><!-- 1门诊，2住院 -->
	<column name="e:WAIT,0016" value="2"/>
	<column name="p:WAIT,0133" value="HISID001"/>
	<column name="p:0010,0010" value="测试患者"/>
	<column name="p:0010,0040" value="女"/>
	<column name="p:0010,0030" value="1980-01-01"/>
	<column name="e:WAIT,0518" value="李医生"/>
	<column name="e:WAIT,0287" value=""/>
	<column name="e:WAIT,0513" value="胸部正侧位"/>
	<column name="e:WAIT,0043" value="外科一"/>
	<column name="e:WAIT,0297" value=""/>
	<column name="e:WAIT,0039" value="外伤"/>
	<column name="e:WAIT,0092" value=""/>
	<column name="e:WAIT,0298" value="输助诊断"/>
	<column name="e:WAIT,0054" value=""/>
	<column name="e:WAIT,0103" value="209.01"/>
	<column name="p:0010,2154" value="11911912000"/>
	<column name="p:0010,1040" value="北京市"/>
	<column name="e:WAIT,0332" value=""/>
	<column name="p:WAIT,0116" value="110101198001012430"/>
	<column name="p:0010,2108" value="AA"/>
	<column name="e:WAIT,0512" value="2019:01:01"/>
	<column name="e:WAIT,0096" value="20190101120010"/>
	<column name="e:WAIT,0510" value="放射科"/>
	<column name="e:WAIT,0579" value="放射科"/>
	<column name="p:WAIT,0118" value="自费"/>
	<column name="e:WAIT,0511" value="HISDX001"/>
	<column name="p:WAIT,0119" value="普通"/>
	
	
	<column name="p:WAIT,0351" value="DIAGID001"/>
	<column name="e:WAIT,0352" value="100888101281"/>
	<column name="e:WAIT,0267" value="100888101281"/>
	<column name="o:WAIT,0266" value="HISEXAM003"/>
	<column name="e:WAIT,0018" value="148"/>
	<column name="e:WAIT,0072" value="150"/>
	<column name="e:0040,0003" value="15:20--16:20"/>
	<column name="e:0040,0002" value="2019-07-09"/>
	
</AEXMLMessage>


]
2019-07-16 14:38:45 - Creating Service {http://med.ge.com/rispacs/}RegistInfoOperationsService from class com.ge.med.rispacs.registerserver.RegistInfoOperations
2019-07-16 14:38:46 - Creating Service {http://med.ge.com/rispacs/}OrderProcessOperationsService from class com.ge.med.rispacs.registerserver.OrderProcessOperations
2019-07-16 14:38:46 - Creating Service {http://med.ge.com/rispacs/}ProcedureStepMgmtOperationsService from class com.ge.med.catcorb.procedurestep.ProcedureStepMgmtOperations
2019-07-16 14:38:46 - Creating Service {http://med.ge.com/rispacs/}ExamProcessOperationsService from class com.ge.med.rispacs.registerserver.ExamProcessOperations
2019-07-16 14:38:46 - Creating Service {http://med.ge.com/rispacs/}ModalityMgmtOperationsService from class com.ge.med.catcorb.modality.ModalityMgmtOperations
2019-07-16 14:38:46 - Creating Service {http://med.ge.com/rispacs/}ProcedureMgmtOperationsService from class com.ge.med.catcorb.procedure.ProcedureMgmtOperations
2019-07-16 14:38:46 - Outbound Message
---------------------------
ID: 3
Address: http://192.168.1.25:9000/services/RegistInfoService
Encoding: UTF-8
Content-Type: application/soap+xml; action="http://med.ge.com/rispacs/RegistInfoService/HISOrderSchedule"
Headers: {Accept=[*/*], Accept-Encoding=[gzip;q=1.0, identity; q=0.5, *;q=0]}
Payload: <soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope"><soap:Body><ns2:PatientAndOrderScheduleXml xmlns:ns2="http://med.ge.com/rispacs/">&lt;AEXMLMessage xmlns=&quot;http://com/ge/med/ehrae/ae&quot;&gt;&#xD;
	&lt;column name=&quot;e:WAIT,0296&quot; value=&quot;HISEXAM003&quot;/&gt;&#xD;
	&lt;column name=&quot;e:WAIT,0046&quot; value=&quot;门诊&quot;/&gt;&lt;!-- 1门诊，2住院 --&gt;&#xD;
	&lt;column name=&quot;e:WAIT,0016&quot; value=&quot;2&quot;/&gt;&#xD;
	&lt;column name=&quot;p:WAIT,0133&quot; value=&quot;HISID001&quot;/&gt;&#xD;
	&lt;column name=&quot;p:0010,0010&quot; value=&quot;测试患者&quot;/&gt;&#xD;
	&lt;column name=&quot;p:0010,0040&quot; value=&quot;女&quot;/&gt;&#xD;
	&lt;column name=&quot;p:0010,0030&quot; value=&quot;1980-01-01&quot;/&gt;&#xD;
	&lt;column name=&quot;e:WAIT,0518&quot; value=&quot;李医生&quot;/&gt;&#xD;
	&lt;column name=&quot;e:WAIT,0287&quot; value=&quot;&quot;/&gt;&#xD;
	&lt;column name=&quot;e:WAIT,0513&quot; value=&quot;胸部正侧位&quot;/&gt;&#xD;
	&lt;column name=&quot;e:WAIT,0043&quot; value=&quot;外科一&quot;/&gt;&#xD;
	&lt;column name=&quot;e:WAIT,0297&quot; value=&quot;&quot;/&gt;&#xD;
	&lt;column name=&quot;e:WAIT,0039&quot; value=&quot;外伤&quot;/&gt;&#xD;
	&lt;column name=&quot;e:WAIT,0092&quot; value=&quot;&quot;/&gt;&#xD;
	&lt;column name=&quot;e:WAIT,0298&quot; value=&quot;输助诊断&quot;/&gt;&#xD;
	&lt;column name=&quot;e:WAIT,0054&quot; value=&quot;&quot;/&gt;&#xD;
	&lt;column name=&quot;e:WAIT,0103&quot; value=&quot;209.01&quot;/&gt;&#xD;
	&lt;column name=&quot;p:0010,2154&quot; value=&quot;11911912000&quot;/&gt;&#xD;
	&lt;column name=&quot;p:0010,1040&quot; value=&quot;北京市&quot;/&gt;&#xD;
	&lt;column name=&quot;e:WAIT,0332&quot; value=&quot;&quot;/&gt;&#xD;
	&lt;column name=&quot;p:WAIT,0116&quot; value=&quot;110101198001012430&quot;/&gt;&#xD;
	&lt;column name=&quot;p:0010,2108&quot; value=&quot;AA&quot;/&gt;&#xD;
	&lt;column name=&quot;e:WAIT,0512&quot; value=&quot;2019:01:01&quot;/&gt;&#xD;
	&lt;column name=&quot;e:WAIT,0096&quot; value=&quot;20190101120010&quot;/&gt;&#xD;
	&lt;column name=&quot;e:WAIT,0510&quot; value=&quot;放射科&quot;/&gt;&#xD;
	&lt;column name=&quot;e:WAIT,0579&quot; value=&quot;放射科&quot;/&gt;&#xD;
	&lt;column name=&quot;p:WAIT,0118&quot; value=&quot;自费&quot;/&gt;&#xD;
	&lt;column name=&quot;e:WAIT,0511&quot; value=&quot;HISDX001&quot;/&gt;&#xD;
	&lt;column name=&quot;p:WAIT,0119&quot; value=&quot;普通&quot;/&gt;&#xD;
	&#xD;
	&#xD;
	&lt;column name=&quot;p:WAIT,0351&quot; value=&quot;DIAGID001&quot;/&gt;&#xD;
	&lt;column name=&quot;e:WAIT,0352&quot; value=&quot;100888101281&quot;/&gt;&#xD;
	&lt;column name=&quot;e:WAIT,0267&quot; value=&quot;100888101281&quot;/&gt;&#xD;
	&lt;column name=&quot;o:WAIT,0266&quot; value=&quot;HISEXAM003&quot;/&gt;&#xD;
	&lt;column name=&quot;e:WAIT,0018&quot; value=&quot;148&quot;/&gt;&#xD;
	&lt;column name=&quot;e:WAIT,0072&quot; value=&quot;150&quot;/&gt;&#xD;
	&lt;column name=&quot;e:0040,0003&quot; value=&quot;15:20--16:20&quot;/&gt;&#xD;
	&lt;column name=&quot;e:0040,0002&quot; value=&quot;2019-07-09&quot;/&gt;&#xD;
	&#xD;
&lt;/AEXMLMessage&gt;&#xD;
&#xD;
&#xD;
</ns2:PatientAndOrderScheduleXml><ns2:ExamStatus xmlns:ns2="http://med.ge.com/rispacs/">1</ns2:ExamStatus><ns2:AuditCommon xmlns:ns2="http://med.ge.com/rispacs/"><userID>1617</userID><username>itpschina</username><appNameId>10</appNameId><hostname>BROKER</hostname><IP>192.168.1.25</IP></ns2:AuditCommon></soap:Body></soap:Envelope>
--------------------------------------
2019-07-16 14:38:47 - Inbound Message
----------------------------
ID: 3
Response-Code: 200
Encoding: UTF-8
Content-Type: application/soap+xml; charset=UTF-8
Headers: {Content-Length=[445], content-type=[application/soap+xml; charset=UTF-8], Server=[Jetty(7.5.4.v20111024)]}
Payload: <soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope"><soap:Body><ns2:HISOrderScheduleResponse xmlns:ns2="http://med.ge.com/rispacs/"><isTrue>false</isTrue><accessionID>ME190711CT1017</accessionID><systemTime></systemTime><deptid></deptid><patientID>107124</patientID><patientIntraID>107124</patientIntraID><examID>27</examID><orderID>21</orderID><hospitalID></hospitalID></ns2:HISOrderScheduleResponse></soap:Body></soap:Envelope>
--------------------------------------
2019-07-16 14:41:08 - received new order:[{"HISEXAMNO":"HISEXAM003","PATIENTTYPE":"1","VISITTIMES":"2","DIAGNOSEID":"DIAGID001","HISID":"HISID001","NAME":"测试患者","BIRTHDATE":"1980-01-01","SEX":"女","LODGEDOCTOR":"李医生","LODGEDOCTORCODE":"","CHECKITEM":"胸部正侧位","LODGESECTION":"外科一","CHECKPART":"","CLINICALDIAGNOSIS":"外伤","CLINICALSIGN":"","CHECKAIM":"输助诊断","BEDNO":"","MONEY":"209.01","TELEPHONE":"11911912000","ADDRESS":"北京市","CHARGEMARK":"已收费","IDENTITYCARD":"110101198001012430","WORKUNIT":"AA","PAYMONEYDATE":"2019:01:01","APPLYTIME":"20190101120010","EXECUTESECTIONNO":"放射科","EXECUTESECTION":"放射科","HEALTHTYPE":"自费","CHECKSERIALNUM":"100888101281","CHECKITEMID":"HISDX001","FLAG":"NW"}]
2019-07-16 14:41:08 - convert to Map:{HISEXAMNO=HISEXAM003, PATIENTTYPE=1, VISITTIMES=2, DIAGNOSEID=DIAGID001, HISID=HISID001, NAME=测试患者, BIRTHDATE=1980-01-01, SEX=女, LODGEDOCTOR=李医生, LODGEDOCTORCODE=, CHECKITEM=胸部正侧位, LODGESECTION=外科一, CHECKPART=, CLINICALDIAGNOSIS=外伤, CLINICALSIGN=, CHECKAIM=输助诊断, BEDNO=, MONEY=209.01, TELEPHONE=11911912000, ADDRESS=北京市, CHARGEMARK=已收费, IDENTITYCARD=110101198001012430, WORKUNIT=AA, PAYMONEYDATE=2019:01:01, APPLYTIME=20190101120010, EXECUTESECTIONNO=放射科, EXECUTESECTION=放射科, HEALTHTYPE=自费, CHECKSERIALNUM=100888101281, CHECKITEMID=HISDX001, FLAG=NW}
2019-07-16 14:41:08 - ==>  Preparing: select * from hisorder.his_order where applyCode=? and validFlag=0 
2019-07-16 14:41:08 - ==> Parameters: HISEXAM003(String)
2019-07-16 14:41:08 - <==      Total: 1
2019-07-16 14:41:08 - search Exist orders:1
2019-07-16 14:41:08 - updating orders:{HISEXAMNO=HISEXAM003, PATIENTTYPE=1, VISITTIMES=2, DIAGNOSEID=DIAGID001, HISID=HISID001, NAME=测试患者, BIRTHDATE=1980-01-01, SEX=女, LODGEDOCTOR=李医生, LODGEDOCTORCODE=, CHECKITEM=胸部正侧位, LODGESECTION=外科一, CHECKPART=, CLINICALDIAGNOSIS=外伤, CLINICALSIGN=, CHECKAIM=输助诊断, BEDNO=, MONEY=209.01, TELEPHONE=11911912000, ADDRESS=北京市, CHARGEMARK=已收费, IDENTITYCARD=110101198001012430, WORKUNIT=AA, PAYMONEYDATE=2019:01:01, APPLYTIME=20190101120010, EXECUTESECTIONNO=放射科, EXECUTESECTION=放射科, HEALTHTYPE=自费, CHECKSERIALNUM=100888101281, CHECKITEMID=HISDX001, FLAG=NW}
2019-07-16 14:41:08 - ==>  Preparing: update hisorder.his_order set applyCode=?,patientCode=?,visitNO=?,patientId=?,cardNO=?, patientName=?,brithday=?,sex=?,phone=?,address=?, authorName=?,authorCode=?,checkMethod=?,checkMethodCode=?, applyOffice=?,checkPart=?,disease=?,history=?, note=?,bedNO=?,charge=?, identityNO=?,organization=?,verifierTime=?,authorTime=?, executeOfficeCode=?, executeOffice=?, yibao=?,orderCode=? where applyCode=? and validFlag=0 
2019-07-16 14:41:08 - ==> Parameters: HISEXAM003(String), 1(String), 2(String), DIAGID001(String), HISID001(String), 测试患者(String), 1980-01-01(String), 女(String), 11911912000(String), 北京市(String), 李医生(String), (String), 胸部正侧位(String), HISDX001(String), 外科一(String), (String), 外伤(String), (String), 输助诊断(String), (String), 209.01(String), 110101198001012430(String), AA(String), 2019:01:01(String), 20190101120010(String), 放射科(String), 放射科(String), 自费(String), 100888101281(String), HISEXAM003(String)
2019-07-16 14:41:08 - <==    Updates: 1
2019-07-16 14:41:08 - updated
2019-07-16 14:41:11 - index mapping null
2019-07-16 14:41:14 - received new order:[{"HISEXAMNO":"HISEXAM003","PATIENTTYPE":"1","VISITTIMES":"2","DIAGNOSEID":"DIAGID001","HISID":"HISID001","NAME":"测试患者","BIRTHDATE":"1980-01-01","SEX":"女","LODGEDOCTOR":"李医生","LODGEDOCTORCODE":"","CHECKITEM":"胸部正侧位","LODGESECTION":"外科一","CHECKPART":"","CLINICALDIAGNOSIS":"外伤","CLINICALSIGN":"","CHECKAIM":"输助诊断","BEDNO":"","MONEY":"209.01","TELEPHONE":"11911912000","ADDRESS":"北京市","CHARGEMARK":"已收费","IDENTITYCARD":"110101198001012430","WORKUNIT":"AA","PAYMONEYDATE":"2019:01:01","APPLYTIME":"20190101120010","EXECUTESECTIONNO":"放射科","EXECUTESECTION":"放射科","HEALTHTYPE":"自费","CHECKSERIALNUM":"100888101281","CHECKITEMID":"HISDX001","FLAG":"NW"}]
2019-07-16 14:41:14 - convert to Map:{HISEXAMNO=HISEXAM003, PATIENTTYPE=1, VISITTIMES=2, DIAGNOSEID=DIAGID001, HISID=HISID001, NAME=测试患者, BIRTHDATE=1980-01-01, SEX=女, LODGEDOCTOR=李医生, LODGEDOCTORCODE=, CHECKITEM=胸部正侧位, LODGESECTION=外科一, CHECKPART=, CLINICALDIAGNOSIS=外伤, CLINICALSIGN=, CHECKAIM=输助诊断, BEDNO=, MONEY=209.01, TELEPHONE=11911912000, ADDRESS=北京市, CHARGEMARK=已收费, IDENTITYCARD=110101198001012430, WORKUNIT=AA, PAYMONEYDATE=2019:01:01, APPLYTIME=20190101120010, EXECUTESECTIONNO=放射科, EXECUTESECTION=放射科, HEALTHTYPE=自费, CHECKSERIALNUM=100888101281, CHECKITEMID=HISDX001, FLAG=NW}
2019-07-16 14:41:14 - ==>  Preparing: select * from hisorder.his_order where applyCode=? and validFlag=0 
2019-07-16 14:41:14 - ==> Parameters: HISEXAM003(String)
2019-07-16 14:41:14 - <==      Total: 1
2019-07-16 14:41:14 - search Exist orders:1
2019-07-16 14:41:14 - updating orders:{HISEXAMNO=HISEXAM003, PATIENTTYPE=1, VISITTIMES=2, DIAGNOSEID=DIAGID001, HISID=HISID001, NAME=测试患者, BIRTHDATE=1980-01-01, SEX=女, LODGEDOCTOR=李医生, LODGEDOCTORCODE=, CHECKITEM=胸部正侧位, LODGESECTION=外科一, CHECKPART=, CLINICALDIAGNOSIS=外伤, CLINICALSIGN=, CHECKAIM=输助诊断, BEDNO=, MONEY=209.01, TELEPHONE=11911912000, ADDRESS=北京市, CHARGEMARK=已收费, IDENTITYCARD=110101198001012430, WORKUNIT=AA, PAYMONEYDATE=2019:01:01, APPLYTIME=20190101120010, EXECUTESECTIONNO=放射科, EXECUTESECTION=放射科, HEALTHTYPE=自费, CHECKSERIALNUM=100888101281, CHECKITEMID=HISDX001, FLAG=NW}
2019-07-16 14:41:14 - ==>  Preparing: update hisorder.his_order set applyCode=?,patientCode=?,visitNO=?,patientId=?,cardNO=?, patientName=?,brithday=?,sex=?,phone=?,address=?, authorName=?,authorCode=?,checkMethod=?,checkMethodCode=?, applyOffice=?,checkPart=?,disease=?,history=?, note=?,bedNO=?,charge=?, identityNO=?,organization=?,verifierTime=?,authorTime=?, executeOfficeCode=?, executeOffice=?, yibao=?,orderCode=? where applyCode=? and validFlag=0 
2019-07-16 14:41:14 - ==> Parameters: HISEXAM003(String), 1(String), 2(String), DIAGID001(String), HISID001(String), 测试患者(String), 1980-01-01(String), 女(String), 11911912000(String), 北京市(String), 李医生(String), (String), 胸部正侧位(String), HISDX001(String), 外科一(String), (String), 外伤(String), (String), 输助诊断(String), (String), 209.01(String), 110101198001012430(String), AA(String), 2019:01:01(String), 20190101120010(String), 放射科(String), 放射科(String), 自费(String), 100888101281(String), HISEXAM003(String)
2019-07-16 14:41:14 - <==    Updates: 1
2019-07-16 14:41:14 - updated
2019-07-16 14:41:23 - received new order:[{"HISEXAMNO":"HISEXAM003","PATIENTTYPE":"1","VISITTIMES":"2","DIAGNOSEID":"DIAGID001","HISID":"HISID001","NAME":"测试患者","SCHEDULED_DATE_START":"2019-07-09 15:20:00","SCHEDULED_DATE_END":"2019-07-09 16:20:00","SCHEDULED_MODALITY":"148","SCHEDULE_OPERATOR":"","CHECKITEM":"","CHECKSERIALNUM":"","CHECKITEMID":"XR001","FLAG":"NW"}]
2019-07-16 14:41:23 - convert to Map:{HISEXAMNO=HISEXAM003, PATIENTTYPE=1, VISITTIMES=2, DIAGNOSEID=DIAGID001, HISID=HISID001, NAME=测试患者, SCHEDULED_DATE_START=2019-07-09 15:20:00, SCHEDULED_DATE_END=2019-07-09 16:20:00, SCHEDULED_MODALITY=148, SCHEDULE_OPERATOR=, CHECKITEM=, CHECKSERIALNUM=, CHECKITEMID=XR001, FLAG=NW}
2019-07-16 14:41:23 - ==>  Preparing: select * from hisorder.his_order where applyCode=? and validFlag=0 
2019-07-16 14:41:23 - ==> Parameters: HISEXAM003(String)
2019-07-16 14:41:23 - <==      Total: 1
2019-07-16 14:41:23 - merged Map:{HISEXAMNO=HISEXAM003, PATIENTTYPE=1, VISITTIMES=2, DIAGNOSEID=DIAGID001, HISID=HISID001, NAME=测试患者, SCHEDULED_DATE_START=2019-07-09 15:20:00, SCHEDULED_DATE_END=2019-07-09 16:20:00, SCHEDULED_MODALITY=148, SCHEDULE_OPERATOR=, CHECKITEM=, CHECKSERIALNUM=, CHECKITEMID=XR001, FLAG=NW, createTime=13:17:09, sex=女, phone=11911912000, validFlag=0, orderCode=100888101281, visitNO=2, data_source=MQ, executeOfficeCode=放射科, bedNO=, SCHEDULE=0, disease=外伤, yiBao=自费, id=7, patientId=DIAGID001, organization=AA, patientName=测试患者, applyOffice=外科一, checkMethodCode=HISDX001, brithday=1980-01-01, verifierTime=2019:01:01, createDate=2019-07-11, note=输助诊断, checkPart=, patientCode=1, executeOffice=放射科, checkMethod=胸部正侧位, identityNO=110101198001012430, authorCode=, history=, cardNO=HISID001, charge=209.01, address=北京市, authorName=李医生, readFlag=0, authorTime=20190101120010, applyCode=HISEXAM003}
2019-07-16 14:41:23 - ==>  Preparing: SELECT m.ModalityID,psi.ProcedureStepID,psi.ProcedureStepName,ps.ProcedureName,m.ModalityName,md.deptname,m.ModalityLocation FROM gecris.ProcedureStepInfo psi,gecris.ProcedureInfo ps,gecris.ModalityInfo m,gecris.modalitydept md WHERE psi.ProcedureID=ps.ProcedureID AND m.is_valid=true AND ps.ProcedureIDType=m.ModalityID AND m.deptid=md.deptid AND psi.Status='active' AND psi.procedurestep_code=? AND m.ModalityID=? limit 1 
2019-07-16 14:41:23 - ==> Parameters: XR001(String), 148(String)
2019-07-16 14:41:23 - <==      Total: 1
2019-07-16 14:41:23 - filled procedure map:{HISEXAMNO=HISEXAM003, PATIENTTYPE=1, VISITTIMES=2, DIAGNOSEID=DIAGID001, HISID=HISID001, NAME=测试患者, SCHEDULED_DATE_START=2019-07-09 15:20:00, SCHEDULED_DATE_END=2019-07-09 16:20:00, SCHEDULED_MODALITY=148, SCHEDULE_OPERATOR=, CHECKITEM=, CHECKSERIALNUM=, CHECKITEMID=XR001, FLAG=NW, createTime=13:17:09, sex=女, phone=11911912000, validFlag=0, orderCode=100888101281, visitNO=2, data_source=MQ, executeOfficeCode=放射科, bedNO=, SCHEDULE=0, disease=外伤, yiBao=自费, id=7, patientId=DIAGID001, organization=AA, patientName=测试患者, applyOffice=外科一, checkMethodCode=HISDX001, brithday=1980-01-01, verifierTime=2019:01:01, createDate=2019-07-11, note=输助诊断, checkPart=, patientCode=1, executeOffice=放射科, checkMethod=胸部正侧位, identityNO=110101198001012430, authorCode=, history=, cardNO=HISID001, charge=209.01, address=北京市, authorName=李医生, readFlag=0, authorTime=20190101120010, applyCode=HISEXAM003, ModalityID=148, ModalityName=CT1, ModalityLocation=CT, ProcedureName=头部CT, deptname=CT室, ProcedureStepName=头部急诊平扫, ProcedureStepID=150}
2019-07-16 14:41:23 - jcorb query string:[<?xml version='1.0' encoding='utf-8' ?><fields><column name='e:WAIT,0267' value='100888101281'/></fields>]
2019-07-16 14:41:23 - Outbound Message
---------------------------
ID: 4
Address: http://192.168.1.25:9000/services/SearchEngineerService
Encoding: UTF-8
Content-Type: application/soap+xml; action="http://med.ge.com/rispacs/SearchEngineerService/Search"
Headers: {Accept=[*/*], Accept-Encoding=[gzip;q=1.0, identity; q=0.5, *;q=0]}
Payload: <soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope"><soap:Body><ns2:Xmlcond xmlns:ns2="http://med.ge.com/rispacs/">&lt;?xml version='1.0' encoding='utf-8' ?&gt;&lt;fields&gt;&lt;column name='e:WAIT,0267' value='100888101281'/&gt;&lt;/fields&gt;</ns2:Xmlcond><ns2:Tags xmlns:ns2="http://med.ge.com/rispacs/"><item>p:WAIT,0128</item><item>o:WAIT,0266</item><item>e:WAIT,0267</item><item>e:WAIT,0004</item><item>e:WAIT,0014</item><item>e:0008,0050</item></ns2:Tags></soap:Body></soap:Envelope>
--------------------------------------
2019-07-16 14:41:23 - Inbound Message
----------------------------
ID: 4
Response-Code: 200
Encoding: UTF-8
Content-Type: application/soap+xml; charset=UTF-8
Headers: {Content-Length=[323], content-type=[application/soap+xml; charset=UTF-8], Server=[Jetty(7.5.4.v20111024)]}
Payload: <soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope"><soap:Body><ns2:SearchResponse xmlns:ns2="http://med.ge.com/rispacs/"><item><item>107124</item><item>HISEXAM003</item><item>100888101281</item><item>27</item><item>1</item><item>ME190711CT1017</item></item></ns2:SearchResponse></soap:Body></soap:Envelope>
--------------------------------------
